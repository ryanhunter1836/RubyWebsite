const capitalize = (s) => {
  if (typeof s !== 'string') return ''
  return s.charAt(0).toUpperCase() + s.slice(1)
}

const elements = ["name", "email", "password", "password_confirmation"];

function inlineError(name, message) {
    messageElementName = name + "_error";
    fieldElementName = name + "_field";
    message = capitalize(name) + " " + message;
    messageElement = document.getElementById(messageElementName);
    messageElement.innerHTML = message;
    messageElement.classList.add("invalid-feedback");
    document.getElementById(fieldElementName).classList.add("is-invalid");
}

function clearErrors() {
    for(i = 0; i < elements.length; i++) {
        messageElementName = elements[i] + "_error";
        fieldElementName = elements[i] + "_field";
        messageElement = document.getElementById(messageElementName);
        messageElement.innerHTML = "";
        messageElement.classList.remove("invalid-feedback");
        document.getElementById(fieldElementName).classList.remove("is-invalid");
    }
}



<% if @user.errors.any? %>
    clearErrors();      
    //Display the error messages
    <% if @user.errors["name"].any? %>
        inlineError('name', '<%= @user.errors["name"][0] %>')
    <% end %>
    <% if @user.errors["email"].any? %>
        inlineError('email', '<%= @user.errors["email"][0] %>')
    <% end %>
    <% if @user.errors["password"].any? %>
        inlineError('password', '<%= @user.errors["password"][0] %>')
    <% end %>
    <% if @user.errors["password_confirmation"].any? %>
        inlineError('password_confirmation', '<%= @user.errors["password_confirmation"][0] %>')
    <% end %>
<% end %>
